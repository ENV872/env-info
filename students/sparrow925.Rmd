---
title: <span style="color:magenta">**Elise's Cool Website**</span>
author: "Elise"
date: "January 18, 2056"
output: html_document
---
```{r SetExpectations, echo=F, results='hide'}

# set working directory if has child directory
dir_child = 'students' 
if (dir_child %in% list.files()){
  if (interactive()) {  
    # R Console
    setwd(dir_child)
  } else {              
    # knitting
    knitr::opts_knit$set(root.dir=dir_child)  
  }
}

print(getwd()) # Is this in env-info/students?

suppressPackageStartupMessages({
  library(readr)
  library(dplyr)
  library(tidyr)
})

```

### **Content**
        
I am interested in environmental remediation: pollution modeling and the data analysis that comes with that are my jam. I also think that the tools we are learning in this class are useful in the corporate setting -- performance metrics, etc. could all be run through tools like this.

I also have a [blog](www.elisewall.com) where I post projects and classwork I'm particularly passionate about.

![](images/sparrow925_groundhogday.gif)

***
## Assignment 3
### **Data Wrangling**

####How does using read_csv from the readr package improve data readability?

Using read.csv (the default) is pretty messy and unhelpful

```{r read.csv, eval=F}
d = read.csv('./data/sparrow925_EUSO2.csv')
head(d)
summary(d)
```

Compare that to using read_csv, which gives you usefull info!

```{r read_csv}
# Oh man the head and summary here are so much more usable
d2 = read_csv('./data/sparrow925_EUSO2.csv')
head(d2)
# summary(d2)
```

Now, lets use dplyr.
Let's ask ourselves, how many cities are measured for each country?

#### Using Multiple Variables (The Old Way)

```{r messyway, eval=F}
# read in csv
d = read_csv('./data/sparrow925_EUSO2.csv')
# limit columns to country and city
d2=d[,c('country_code','city_name')]
# get count per country
d3=aggregate(city_name ~ country_code, data=d2, FUN='length')
# write out csv
write.csv(d3, './data/sparrow925_EUSO2_citycount.csv', row.names = FALSE)
```

#### Using dplyr to Write Compact Code

```{r cleanway, eval=F}
# read in csv
sparrow925_EUSO2_dplyr = read_csv('./data/sparrow925_EUSO2.csv')
sparrow925_EUSO2_dplyr %T>%
  glimpse() %>% # view 
  select(country_code, city_name) %>% # limit columns
  group_by(city_name) %>% # get count by grouping
  summarize(n=n()) %>% # then summarize
  write.csv('./data/sparrow925_EUSO2_citycount.csv')
```

***
### Assignment 4: Tidy CO2 Emissions

```{r Assn4, eval=F}
library(readxl) # install.packages('readxl')

url = 'http://edgar.jrc.ec.europa.eu/news_docs/CO2_1970-2014_dataset_of_CO2_report_2015.xls'
xls = '../data/co2_europa.xls'

# This download seems to corrupt on PCs... look at download.file helpfile, maybe try another method? For now we'll use a workaround I guess.
print(getwd())
if (!file.exists(xls)){
  download.file(url, xls)
}
co2 = read_excel(xls, skip=12)
co2

```


