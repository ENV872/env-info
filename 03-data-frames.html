<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Data Carpentry contributors" />


<title>The data.frame class</title>

<script src="libs/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.1/css/cosmo.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.1/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/respond.min.js"></script>
<link href="libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet">
<script src="libs/tocify-1.9.1/jquery-ui-1.9.2.custom.min.js"></script>
<script src="libs/tocify-1.9.1/jquery.tocify.min.js"></script>

<link href="libs/lightbox-2.8.2/css/lightbox.min.css" rel="stylesheet">

<style type="text/css">
@media (max-width: 992px) {
#toc {
  position: relative;
  width: 100%;
  margin: 0px 0px 20px 0px;
}
}
</style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #303030; color: #cccccc; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; }
td.sourceCode { padding-left: 5px; }
pre, code { color: #cccccc; background-color: #303030; }
code > span.kw { color: #f0dfaf; }
code > span.dt { color: #dfdfbf; }
code > span.dv { color: #dcdccc; }
code > span.bn { color: #dca3a3; }
code > span.fl { color: #c0bed1; }
code > span.ch { color: #dca3a3; }
code > span.st { color: #cc9393; }
code > span.co { color: #7f9f7f; }
code > span.ot { color: #efef8f; }
code > span.al { color: #ffcfaf; }
code > span.fu { color: #efef8f; }
code > span.er { color: #c3bf9f; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<link rel="stylesheet" href="libs/font-awesome-4.5.0/css/font-awesome.min.css" type="text/css" />
<link rel="stylesheet" href="libs/octicons-3.3.0/octicons.css" type="text/css" />
<link rel="stylesheet" href="styles/styles.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">


<div class="row-fluid">
<div class="navbar navbar-default navbar-fixed-top navbar-transparent">
  <div class="container">
    <div class="navbar-header">
      <a href="./" class="navbar-brand"><i class="fa fa-home"></i> env-info</a>
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <div class="navbar-collapse collapse" id="navbar-main">
      <ul class="nav navbar-nav">
        <li>
          <a href="./schedule.html"><i class="fa fa-calendar"></i> schedule</a>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="./students.html"><i class="fa fa-users"></i> students</a></li>
      </ul>
    </div>
  </div>
</div>
</div>

<div class="row-fluid">
  <div class="span3 col-md-3">
    <div id="toc"></div>
  </div>
  <div class="main-content span9 col-md-9">

<div id="header">
<h1 class="title">The <code>data.frame</code> class</h1>
<h4 class="author"><em>Data Carpentry contributors</em></h4>
</div>


<hr />
<blockquote>
<h2>Learning Objectives</h2>
<ul>
<li>understand the concept of a <code>data.frame</code></li>
<li>use sequences</li>
<li>know how to access any element of a <code>data.frame</code></li>
</ul>
</blockquote>
<hr />
<div id="what-are-data-frames" class="section level1">
<h1>What are data frames?</h1>
<p><code>data.frame</code> is the <em>de facto</em> data structure for most tabular data and what we use for statistics and plotting.</p>
<p>A <code>data.frame</code> is a collection of vectors of identical lengths. Each vector represents a column, and each vector can be of a different data type (e.g., characters, integers, factors). The <code>str()</code> function is useful to inspect the data types of the columns.</p>
<p>A <code>data.frame</code> can be created by the functions <code>read.csv()</code> or <code>read.table()</code>, in other words, when importing spreadsheets from your hard drive (or the web).</p>
<p>By default, <code>data.frame</code> converts (= coerces) columns that contain characters (i.e., text) into the <code>factor</code> data type. Depending on what you want to do with the data, you may want to keep these columns as <code>character</code>. To do so, <code>read.csv()</code> and <code>read.table()</code> have an argument called <code>stringsAsFactors</code> which can be set to <code>FALSE</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r">some_data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/some_file.csv&quot;</span>, <span class="dt">stringsAsFactors=</span><span class="ot">FALSE</span>)</code></pre>
<!--- talk about colClasses argument?, row names?  --->
<p>You can also create <code>data.frame</code> manually with the function <code>data.frame()</code>. This function can also take the argument <code>stringsAsFactors</code>. Compare the output of these examples, and compare the difference between when the data are being read as <code>character</code> and when they are being read as <code>factor</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">example_data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">animal=</span><span class="kw">c</span>(<span class="st">&quot;dog&quot;</span>, <span class="st">&quot;cat&quot;</span>, <span class="st">&quot;sea cucumber&quot;</span>, <span class="st">&quot;sea urchin&quot;</span>),
                           <span class="dt">feel=</span><span class="kw">c</span>(<span class="st">&quot;furry&quot;</span>, <span class="st">&quot;furry&quot;</span>, <span class="st">&quot;squishy&quot;</span>, <span class="st">&quot;spiny&quot;</span>),
                           <span class="dt">weight=</span><span class="kw">c</span>(<span class="dv">45</span>, <span class="dv">8</span>, <span class="fl">1.1</span>, <span class="fl">0.8</span>))
<span class="kw">str</span>(example_data)</code></pre>
<pre><code>#&gt; &#39;data.frame&#39;:    4 obs. of  3 variables:
#&gt;  $ animal: Factor w/ 4 levels &quot;cat&quot;,&quot;dog&quot;,&quot;sea cucumber&quot;,..: 2 1 3 4
#&gt;  $ feel  : Factor w/ 3 levels &quot;furry&quot;,&quot;spiny&quot;,..: 1 1 3 2
#&gt;  $ weight: num  45 8 1.1 0.8</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">example_data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">animal=</span><span class="kw">c</span>(<span class="st">&quot;dog&quot;</span>, <span class="st">&quot;cat&quot;</span>, <span class="st">&quot;sea cucumber&quot;</span>, <span class="st">&quot;sea urchin&quot;</span>),
                           <span class="dt">feel=</span><span class="kw">c</span>(<span class="st">&quot;furry&quot;</span>, <span class="st">&quot;furry&quot;</span>, <span class="st">&quot;squishy&quot;</span>, <span class="st">&quot;spiny&quot;</span>),
                           <span class="dt">weight=</span><span class="kw">c</span>(<span class="dv">45</span>, <span class="dv">8</span>, <span class="fl">1.1</span>, <span class="fl">0.8</span>), <span class="dt">stringsAsFactors=</span><span class="ot">FALSE</span>)
<span class="kw">str</span>(example_data)</code></pre>
<pre><code>#&gt; &#39;data.frame&#39;:    4 obs. of  3 variables:
#&gt;  $ animal: chr  &quot;dog&quot; &quot;cat&quot; &quot;sea cucumber&quot; &quot;sea urchin&quot;
#&gt;  $ feel  : chr  &quot;furry&quot; &quot;furry&quot; &quot;squishy&quot; &quot;spiny&quot;
#&gt;  $ weight: num  45 8 1.1 0.8</code></pre>
<div id="challenge" class="section level3">
<h3>Challenge</h3>
<ol style="list-style-type: decimal">
<li><p>There are a few mistakes in this hand crafted <code>data.frame</code>, can you spot and fix them? Don’t hesitate to experiment!</p>
<pre><code>author_book &lt;- data.frame(author_first=c(&quot;Charles&quot;, &quot;Ernst&quot;, &quot;Theodosius&quot;),
                          author_last=c(Darwin, Mayr, Dobzhansky),
                          year=c(1942, 1970))</code></pre></li>
<li><p>Can you predict the class for each of the columns in the following example?</p>
<pre><code>country_climate &lt;- data.frame(country=c(&quot;Canada&quot;, &quot;Panama&quot;, &quot;South Africa&quot;, &quot;Australia&quot;),
                               climate=c(&quot;cold&quot;, &quot;hot&quot;, &quot;temperate&quot;, &quot;hot/temperate&quot;),
                               temperature=c(10, 30, 18, &quot;15&quot;),
                               northern_hemisphere=c(TRUE, TRUE, FALSE, &quot;FALSE&quot;),
                               has_kangaroo=c(FALSE, FALSE, FALSE, 1))</code></pre>
<p>Check your guesses using <code>str(country_climate)</code>. Are they what you expected? Why? Why not?</p>
<p>R coerces (when possible) to the data type that is the least common denominator and is the easiest to coerce to.</p></li>
</ol>
</div>
</div>
<div id="inspecting-data.frame-objects" class="section level1">
<h1>Inspecting <code>data.frame</code> objects</h1>
<p>We already saw how the functions <code>head()</code> and <code>str()</code> can be useful to check the content and the structure of a <code>data.frame</code>. Here is a non-exhaustive list of functions to get a sense of the content/structure of the data.</p>
<ul>
<li>Size:
<ul>
<li><code>dim()</code> - returns a vector with the number of rows in the first element, and the number of columns as the second element (the __dim__ensions of the object)</li>
<li><code>nrow()</code> - returns the number of rows</li>
<li><code>ncol()</code> - returns the number of columns</li>
</ul></li>
<li>Content:
<ul>
<li><code>head()</code> - shows the first 6 rows</li>
<li><code>tail()</code> - shows the last 6 rows</li>
</ul></li>
<li>Names:
<ul>
<li><code>names()</code> - returns the column names (synonym of <code>colnames()</code> for <code>data.frame</code> objects)</li>
</ul></li>
<li><code>rownames()</code> - returns the row names</li>
<li>Summary:</li>
<li><code>str()</code> - structure of the object and information about the class, length and content of each column</li>
<li><code>summary()</code> - summary statistics for each column</li>
</ul>
<p>Note: most of these functions are “generic”, they can be used on other types of objects besides <code>data.frame</code>.</p>
</div>
<div id="indexing-and-sequences" class="section level1">
<h1>Indexing and sequences</h1>
<p>If we want to extract one or several values from a vector, we must provide one or several indices in square brackets, just as we do in math. For instance:</p>
<pre class="sourceCode r"><code class="sourceCode r">animals &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;mouse&quot;</span>, <span class="st">&quot;rat&quot;</span>, <span class="st">&quot;dog&quot;</span>, <span class="st">&quot;cat&quot;</span>)
animals[<span class="dv">2</span>]</code></pre>
<pre><code>#&gt; [1] &quot;rat&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">animals[<span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">2</span>)]</code></pre>
<pre><code>#&gt; [1] &quot;dog&quot; &quot;rat&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">animals[<span class="dv">2</span>:<span class="dv">4</span>]</code></pre>
<pre><code>#&gt; [1] &quot;rat&quot; &quot;dog&quot; &quot;cat&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">more_animals &lt;-<span class="st"> </span>animals[<span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">3</span>, <span class="dv">2</span>:<span class="dv">4</span>)]
more_animals</code></pre>
<pre><code>#&gt; [1] &quot;mouse&quot; &quot;rat&quot;   &quot;dog&quot;   &quot;rat&quot;   &quot;dog&quot;   &quot;cat&quot;</code></pre>
<p>R indexes start at 1. Programming languages like Fortran, MATLAB, and R start counting at 1, because that’s what human beings typically do. Languages in the C family (including C++, Java, Perl, and Python) count from 0 because that’s simpler for computers to do.</p>
<p><code>:</code> is a special function that creates numeric vectors of integers in increasing or decreasing order, test <code>1:10</code> and <code>10:1</code> for instance. The function <code>seq()</code> (for __seq__uence) can be used to create more complex patterns:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dt">by=</span><span class="dv">2</span>)</code></pre>
<pre><code>#&gt; [1] 1 3 5 7 9</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dt">length.out=</span><span class="dv">3</span>)</code></pre>
<pre><code>#&gt; [1]  5.0  7.5 10.0</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dv">50</span>, <span class="dt">by=</span><span class="dv">5</span>, <span class="dt">length.out=</span><span class="dv">10</span>)</code></pre>
<pre><code>#&gt;  [1] 50 55 60 65 70 75 80 85 90 95</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">8</span>, <span class="dt">by=</span><span class="dv">3</span>) <span class="co"># sequence stops to stay below upper limit</span></code></pre>
<pre><code>#&gt; [1] 1 4 7</code></pre>
<p>Our survey data frame has rows and columns (it has 2 dimensions), if we want to extract some specific data from it, we need to specify the “coordinates” we want from it. Row numbers come first, followed by column numbers.</p>
<pre class="sourceCode r"><code class="sourceCode r">surveys[<span class="dv">1</span>]      <span class="co"># first row in the data frame</span>
surveys[<span class="dv">1</span>, <span class="dv">1</span>]   <span class="co"># first element in the first column of the data frame</span>
surveys[<span class="dv">1</span>, <span class="dv">6</span>]   <span class="co"># first element in the 6th column</span>
surveys[<span class="dv">1</span>:<span class="dv">3</span>, <span class="dv">7</span>] <span class="co"># first three elements in the 7th column</span>
surveys[<span class="dv">3</span>, ]    <span class="co"># the 3rd element for all columns</span>
surveys[, <span class="dv">8</span>]    <span class="co"># the entire 8th column</span>
head_surveys &lt;-<span class="st"> </span>surveys[<span class="dv">1</span>:<span class="dv">6</span>, ] <span class="co"># surveys[1:6, ] is equivalent to head(surveys)</span></code></pre>
<div id="a-special-feature-of-data-frames" class="section level3">
<h3>A Special Feature of Data Frames</h3>
<p>As well as using numeric values to subset a <code>data.frame</code> (or <code>matrix</code>), columns can be called by name.</p>
<pre class="sourceCode r"><code class="sourceCode r">surveys[,<span class="st">&quot;species_id&quot;</span>]</code></pre>
<p>The <code>data.frame</code> object was originally created to store statistical variables, so it treats each column in this way. We could also extract a single column using a <code>$</code> symbol after the object name. The auto-complete feature of RStudio is also very helpful here. This will give that single column of the <code>data.frame</code> as a vector.</p>
<pre class="sourceCode r"><code class="sourceCode r">surveys$species_id</code></pre>
</div>
<div id="challenge-1" class="section level3">
<h3>Challenge</h3>
<ol style="list-style-type: decimal">
<li>The function <code>nrow()</code> on a <code>data.frame</code> returns the number of rows. Use it, in conjuction with <code>seq()</code> to create a new <code>data.frame</code> called <code>surveys_by_10</code> that includes every 10th row of the survey data frame starting at row 10 (10, 20, 30, …)</li>
</ol>
<!---

```r
surveys_by_10 <- surveys[seq(10, nrow(surveys), by=10), ]
```
--->
</div>
</div>

  </div> <!--span-9-->
</div> <!--row-fluid-->

<!--
<script src="libs/lightbox-2.8.2/js/lightbox.min.js"></script>

<script>
    lightbox.option({
      'albumLabel': 'Example %1 of %2',
      'resizeDuration': 200,
      'fadeDuration': 200,
      'wrapAround': true
    })
</script>
-->

<style type="text/css">
.main-container {
  max-width: none;
}
</style>

<script>
$(function() {
    var toc = $("#toc").tocify({
      selectors: "h2,h3",
      theme: "bootstrap3",
      context: '.main-content',
      hashGenerator: 'pretty',
      showAndHide: false
    }).data("toc-tocify");
    $(".optionName").popover({ trigger: "hover" });
});
</script>

</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
